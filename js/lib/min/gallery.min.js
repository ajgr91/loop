function operaEvento(o){if($(".zoom_overlay").hasClass("open"))switch(o.which){case 39:$(".zoom_next").trigger("click");break;case 37:$(".zoom_prev").trigger("click");break;case 27:$(".zoom_close").trigger("click")}}function swipeStatus(o,t,i){"end"==t&&("right"==i?$(".zoom_prev").trigger("click"):"left"==i&&$(".zoom_next").trigger("click"))}function hex2rgb(o){var t=parseInt(o.substring(1),16),i=(16711680&t)>>16,e=(65280&t)>>8,s=255&t;return[i,e,s]}var imgs,index=0,swipeOptions={triggerOnTouchEnd:!0,swipeStatus:swipeStatus};!function(o){var t;o(document).keydown(operaEvento);var i={init:function(t){var i=o.extend({id:this.selector,idclick:this.selector,currentindex:0,buttonClose:'<a class="zoom_close"></a>',buttonNext:'<a class="zoom_next"><span></span></a>',buttonPrev:'<a class="zoom_prev"><span></span></a>',expand:!1,allowscroll:!1,exit:"button",showClose:!0,showNav:!0,showThumbs:!1,thumbsPosition:"bottom",imgWidth:"ajust",imgHeight:"ajust",borderContentHeight:"100",borderContentWidth:"100",bgColor:"#ffffff",bgOpacity:"0.7",colorContent:"#ffffff",opacityContent:"1",hasBorderContent:!0,borderContent:"1px solid #656565"},t);return o(i.idclick).each(function(){o(this).bind("click",function(){o(this).gallery("openGallery",i)})})},destroyGallery:function(){return o(".zoom_overlay").remove(),this.each(function(){o(this).unbind("click")})},openGallery:function(i){t=o(i.id).length;var e='<div class="zoom_overlay"><div class="zoom_content">';i.showClose&&(e+='<a class="zoom_close"></a>'),i.showNav&&(e+='<a class="zoom_prev"><span></span></a><a class="zoom_next"><span></span></a>'),e+='<div class="zoom_view">';var s="";"ajust"!=i.imgWidth&&(s+="width: "+i.imgWidth+"; "),"ajust"!=i.imgHeight&&(s+="height: "+i.imgHeight+";"),e+='<img src="" style="'+s+'">',e+="</div>",i.showThumbs&&(e+='<div class="zoom_thumbs">',o(i.id).each(function(){e+="left"==i.thumbsPosition||"right"==i.thumbsPosition?'<img style="display: block; cursor: pointer; margin-top: 10px;" data-index="'+o(this).data("index")+'" src="'+o(this).children("img").attr("src")+'" />':'<img style="cursor: pointer;" data-index="'+o(this).data("index")+'" src="'+o(this).children("img").attr("src")+'" />'}),e+="</div>"),e+="</div></div>",o("body").append(e),imgs=o(".zoom_view"),imgs.swipe(swipeOptions),(i.showClose&&("button"==i.exit||"both"==i.exit)||i.expand)&&o(".zoom_close").bind("click",function(){o(this).gallery("closeGallery")}),"click"!=i.exit&&"both"!=i.exit||i.expand||(o(".zoom_overlay").bind("click",function(){o(this).gallery("closeGallery")}),o(".zoom_content").bind("click",function(o){o.stopPropagation()})),i.showThumbs&&o(".zoom_thumbs img").bind("click",function(){i.currentindex=o(this).data("index"),o(this).gallery("goTo",i)}),i.currentindex=o(this).attr("data-index")?o(this).data("index"):0,i.showNav&&(o(".zoom_prev").bind("click",function(){o(this).gallery("prevGallery",i)}),o(".zoom_next").bind("click",function(){o(this).gallery("nextGallery",i)})),o("body").css("overflow","hidden"),o(this).children("img").length>0?o(".zoom_view img").attr("src",o(this).children("img").attr("src")):o(".zoom_view img").attr("src",o(i.id+"[data-index=0]").children("img").attr("src")),o(".zoom_overlay").fadeIn();var m=hex2rgb(i.bgColor);o(".zoom_overlay").css("background-color","rgba("+m[0]+", "+m[1]+", "+m[2]+", "+i.bgOpacity+")"),m=hex2rgb(i.colorContent),o(".zoom_content").css("background-color","rgba("+m[0]+", "+m[1]+", "+m[2]+", "+i.opacityContent+")"),i.hasBorderContent&&!i.expand&&o(".zoom_content").css("border",i.borderContent);var n=o(".zoom_view img").outerWidth(),h=o(".zoom_view img").outerHeight(),r=o(window).outerWidth(),a=o(window).outerHeight(),c=n/h,u=0;if(!i.showThumbs||"bottom"!=i.thumbsPosition&&"top"!=i.thumbsPosition||(u=o(".zoom_thumbs").outerHeight()+10),"ajust"==i.imgWidth&&n>=r-.1*r&&(n=.9*(r-.1*r),o(".zoom_view img").css("width",n),h=n/c,o(".zoom_view img").css("height",h)),"ajust"==i.imgHeight&&h>=a-(.1*a+u)&&(h=.9*(a-(.1*a+u)),o(".zoom_view img").css("height",h),n=h*c,o(".zoom_view img").css("width",n)),i.showThumbs&&"top"==i.thumbsPosition&&(u=-1*u),o(".zoom_view img").css({"margin-left":n/2*-1,"margin-top":(h+u)/2*-1}),i.showThumbs&&("bottom"==i.thumbsPosition?(o(".zoom_thumbs").css("bottom",10),o(".zoom_thumbs").css("left","50%"),o(".zoom_thumbs").css("margin-left",o(".zoom_thumbs").width()/2*-1)):(o(".zoom_thumbs").css("top",10),"top"==i.thumbsPosition&&(o(".zoom_thumbs").css("left","50%"),o(".zoom_thumbs").css("margin-left",o(".zoom_thumbs").width()/2*-1)),"left"==i.thumbsPosition&&(i.expand?o(".zoom_thumbs").css("left",o(".zoom_view img").offset().left-o(".zoom_thumbs").width()-20):o(".zoom_thumbs").css("left",o(".zoom_view").offset().left-o(".zoom_thumbs").width()-20)),"right"==i.thumbsPosition&&(i.expand?o(".zoom_thumbs").css("left",o(".zoom_view img").offset().left+o(".zoom_view img").width()+20):o(".zoom_thumbs").css("left",o(".zoom_view").offset().left+o(".zoom_view").width()+20)))),!i.expand){o(".zoom_content").css({width:n+parseInt(i.borderContentWidth),height:h+parseInt(i.borderContentHeight)});var g=o(".zoom_content").width(),d=o(".zoom_content").height();o(".zoom_content").css({"margin-left":g/2*-1,"margin-top":d/2*-1,left:"50%",top:"50%"})}o(".zoom_overlay").addClass("open")},nextGallery:function(i){var e=parseInt(i.currentindex)+1;console.log(e),e==t&&(e=0),o(".zoom_view img").fadeOut(400,function(){o(".zoom_view img").attr("src",o(i.id+"[data-index="+e+"] img").attr("src")),o(".zoom_view img").css({width:"auto",height:"auto"});var t=o(".zoom_view img").outerWidth(),s=o(".zoom_view img").outerHeight(),m=o(window).outerWidth(),n=o(window).outerHeight(),h=t/s,r=0;if(!i.showThumbs||"bottom"!=i.thumbsPosition&&"top"!=i.thumbsPosition||(r=o(".zoom_thumbs").outerHeight()+10),"ajust"==i.imgWidth&&t>=m-.1*m&&(t=.9*(m-.1*m),o(".zoom_view img").css("width",t),s=t/h,o(".zoom_view img").css("height",s)),"ajust"==i.imgHeight&&s>=n-(.1*n+r)&&(s=.9*(n-(.1*n+r)),o(".zoom_view img").css("height",s),t=s*h,o(".zoom_view img").css("width",t)),i.showThumbs&&"top"==i.thumbsPosition&&(r=-1*r),o(".zoom_view img").css({"margin-left":t/2*-1,"margin-top":(s+r)/2*-1}),!i.expand){o(".zoom_content").css({width:t+parseInt(i.borderContentWidth),height:s+parseInt(i.borderContentHeight)});var a=o(".zoom_content").width(),c=o(".zoom_content").height();o(".zoom_content").css({"margin-left":a/2*-1,"margin-top":c/2*-1,left:"50%",top:"50%"})}}).fadeIn(400),i.showThumbs&&("bottom"==i.thumbsPosition?(o(".zoom_thumbs").css("bottom",10),o(".zoom_thumbs").css("left","50%"),o(".zoom_thumbs").css("margin-left",o(".zoom_thumbs").width()/2*-1)):(o(".zoom_thumbs").css("top",10),"top"==i.thumbsPosition&&(o(".zoom_thumbs").css("left","50%"),o(".zoom_thumbs").css("margin-left",o(".zoom_thumbs").width()/2*-1)),"left"==i.thumbsPosition&&(i.expand?o(".zoom_thumbs").css("left",o(".zoom_view img").offset().left-o(".zoom_thumbs").width()-20):o(".zoom_thumbs").css("left",o(".zoom_view").offset().left-o(".zoom_thumbs").width()-20)),"right"==i.thumbsPosition&&(i.expand?o(".zoom_thumbs").css("left",o(".zoom_view img").offset().left+o(".zoom_view img").width()+20):o(".zoom_thumbs").css("left",o(".zoom_view").offset().left+o(".zoom_view").width()+20)))),i.currentindex=e},prevGallery:function(i){var e=parseInt(i.currentindex)-1;-1==e&&(e=parseInt(t)-1),o(".zoom_view img").fadeOut(400,function(){o(".zoom_view img").attr("src",o(i.id+"[data-index="+e+"] img").attr("src")),o(".zoom_view img").css({width:"auto",height:"auto"});var t=o(".zoom_view img").outerWidth(),s=o(".zoom_view img").outerHeight(),m=o(window).outerWidth(),n=o(window).outerHeight(),h=t/s,r=0;if(!i.showThumbs||"bottom"!=i.thumbsPosition&&"top"!=i.thumbsPosition||(r=o(".zoom_thumbs").outerHeight()+10),"ajust"==i.imgWidth&&t>=m-.1*m&&(t=.9*(m-.1*m),o(".zoom_view img").css("width",t),s=t/h,o(".zoom_view img").css("height",s)),"ajust"==i.imgHeight&&s>=n-(.1*n+r)&&(s=.9*(n-(.1*n+r)),o(".zoom_view img").css("height",s),t=s*h,o(".zoom_view img").css("width",t)),i.showThumbs&&"top"==i.thumbsPosition&&(r=-1*r),o(".zoom_view img").css({"margin-left":t/2*-1,"margin-top":(s+r)/2*-1}),!i.expand){o(".zoom_content").css({width:t+parseInt(i.borderContentWidth),height:s+parseInt(i.borderContentHeight)});var a=o(".zoom_content").width(),c=o(".zoom_content").height();o(".zoom_content").css({"margin-left":a/2*-1,"margin-top":c/2*-1,left:"50%",top:"50%"})}}).fadeIn(400),i.showThumbs&&("bottom"==i.thumbsPosition?(o(".zoom_thumbs").css("bottom",10),o(".zoom_thumbs").css("left","50%"),o(".zoom_thumbs").css("margin-left",o(".zoom_thumbs").width()/2*-1)):(o(".zoom_thumbs").css("top",10),"top"==i.thumbsPosition&&(o(".zoom_thumbs").css("left","50%"),o(".zoom_thumbs").css("margin-left",o(".zoom_thumbs").width()/2*-1)),"left"==i.thumbsPosition&&(i.expand?o(".zoom_thumbs").css("left",o(".zoom_view img").offset().left-o(".zoom_thumbs").width()-20):o(".zoom_thumbs").css("left",o(".zoom_view").offset().left-o(".zoom_thumbs").width()-20)),"right"==i.thumbsPosition&&(i.expand?o(".zoom_thumbs").css("left",o(".zoom_view img").offset().left+o(".zoom_view img").width()+20):o(".zoom_thumbs").css("left",o(".zoom_view").offset().left+o(".zoom_view").width()+20)))),i.currentindex=e},goTo:function(i){var e=i.currentindex;-1==e&&(e=parseInt(t)-1),o(".zoom_view img").fadeOut(400,function(){o(".zoom_view img").attr("src",o(i.id+"[data-index="+e+"] img").attr("src")),o(".zoom_view img").css({width:"auto",height:"auto"});var t=o(".zoom_view img").outerWidth(),s=o(".zoom_view img").outerHeight(),m=o(window).outerWidth(),n=o(window).outerHeight(),h=t/s,r=0;if(!i.showThumbs||"bottom"!=i.thumbsPosition&&"top"!=i.thumbsPosition||(r=o(".zoom_thumbs").outerHeight()+10),"ajust"==i.imgWidth&&t>=m-.1*m&&(t=.9*(m-.1*m),o(".zoom_view img").css("width",t),s=t/h,o(".zoom_view img").css("height",s)),"ajust"==i.imgHeight&&s>=n-(.1*n+r)&&(s=.9*(n-(.1*n+r)),o(".zoom_view img").css("height",s),t=s*h,o(".zoom_view img").css("width",t)),i.showThumbs&&"top"==i.thumbsPosition&&(r=-1*r),o(".zoom_view img").css({"margin-left":t/2*-1,"margin-top":(s+r)/2*-1}),!i.expand){o(".zoom_content").css({width:t+parseInt(i.borderContentWidth),height:s+parseInt(i.borderContentHeight)});var a=o(".zoom_content").width(),c=o(".zoom_content").height();o(".zoom_content").css({"margin-left":a/2*-1,"margin-top":c/2*-1,left:"50%",top:"50%"})}}).fadeIn(400),i.showThumbs&&("bottom"==i.thumbsPosition?(o(".zoom_thumbs").css("bottom",10),o(".zoom_thumbs").css("left","50%"),o(".zoom_thumbs").css("margin-left",o(".zoom_thumbs").width()/2*-1)):(o(".zoom_thumbs").css("top",10),"top"==i.thumbsPosition&&(o(".zoom_thumbs").css("left","50%"),o(".zoom_thumbs").css("margin-left",o(".zoom_thumbs").width()/2*-1)),"left"==i.thumbsPosition&&(i.expand?o(".zoom_thumbs").css("left",o(".zoom_view img").offset().left-o(".zoom_thumbs").width()-20):o(".zoom_thumbs").css("left",o(".zoom_view").offset().left-o(".zoom_thumbs").width()-20)),"right"==i.thumbsPosition&&(i.expand?o(".zoom_thumbs").css("left",o(".zoom_view img").offset().left+o(".zoom_view img").width()+20):o(".zoom_thumbs").css("left",o(".zoom_view").offset().left+o(".zoom_view").width()+20)))),i.currentindex=e},closeGallery:function(){o(".zoom_overlay").removeClass("open"),o("body").css("overflow","auto"),o(".zoom_overlay").fadeOut("fast",function(){o(".zoom_overlay").remove()})}};o.fn.gallery=function(t){return i[t]?i[t].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof t&&t?(o.error("El metodo "+t+" no existe en el plugin"),void 0):i.init.apply(this,arguments)}}(jQuery),$(document).ready(function(){$(".gallery").gallery({imgWidth:"70%",imgHeight:"auto",idclick:".js-trigg-gallery",id:".imgll"})});